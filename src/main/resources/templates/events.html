<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    <title>Veranstaltungen | Adebar</title>
    <script type="text/javascript" src="../static/resources/js/jquery.min.js" th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script type="text/javascript" src="../static/resources/js/bootstrap.min.js" th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
    <link rel="stylesheet" type="text/css" href="../static/resources/css/bootstrap.min.css" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}"/>

    <link rel="stylesheet" type="text/css" href="../static/resources/css/style.css" th:href="@{/resources/css/style.css}"/>

    <script type="text/javascript" src="../static/resources/js/list.min.js" th:src="@{/resources/js/list.min.js}"></script>
    <script type="text/javascript" src="../static/resources/js/list.fuzzysearch.min.js" th:src="@{/resources/js/list.fuzzysearch.min.js}"></script>

    <link rel="stylesheet" type="text/css" href="../static/resources/css/bootstrap-datetimepicker.min.css" th:href="@{/resources/css/bootstrap-datetimepicker.min.css}" />
    <script type="text/javascript" src="../static/resources/js/moment-with-locales.min.js" th:src="@{/resources/js/moment-with-locales.min.js}"></script>
    <script type="text/javascript" src="../static/resources/js/bootstrap-datetimepicker.min.js" th:src="@{/resources/js/bootstrap-datetimepicker.min.js}"></script>

    <link rel="stylesheet" href="../static/resources/css/bootstrap-select.min.css" th:href="@{/resources/css/bootstrap-select.min.css}"/>
    <script src="../static/resources/js/bootstrap-select.min.js" th:src="@{/resources/js/bootstrap-select.min.js}"></script>

    <link rel="stylesheet" href="../static/resources/css/jquery.tablesorter.css" th:href="@{/resources/css/jquery.tablesorter.css}"/>
    <script src="../static/resources/js/jquery.tablesorter.min.js" th:src="@{/resources/js/jquery.tablesorter.min.js}"></script>
</head>
<body>

<!-- central navigation -->
<nav th:replace="navigation :: topNav(page='events')"></nav>

<!-- modal dialogs -->
<section>
  <h2 class="hidden">Dialoge</h2>

  <!-- 'add event' modal -->
  <div class="modal fade" id="add-event-form" tabindex="-1" role="dialog" aria-labelledby="add-event-label">
      <div class="modal-dialog" role="document">
          <div class="modal-content">
              <header class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
                  <h3 class="modal-title" id="add-event-label">Veranstaltung erstellen</h3>
              </header>
              <div class="modal-body">
                  <form id="add-event" class="form-horizontal" method="post" th:object="${addEventForm}" th:action="@{/events/add}">
                      <div class="form-group">
                          <label for="name" class="col-sm-3 control-label">Name</label>
                          <div class="col-sm-9">
                              <input type="text" id="name" class="form-control" name="name" placeholder="Name" autofocus="" required="required" th:field="*{name}" />
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="start-time" class="col-sm-3 control-label">Von <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="right" data-title="Format: DD.MM.YYYY. Wenn die Uhrzeit unwichtig ist, einfach auf 00:00 setzen"></span></label>
                          <div class="col-sm-9">
                              <div class="input-group date" id="start-time-picker">
                                  <input type="text" class="form-control" name="start-time" id="start-time" placeholder="Startzeit" required="required" th:field="*{startTime}"/>
                                  <span class="input-group-addon">
                                      <span class="glyphicon glyphicon-calendar"></span>
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="end-time" class="col-sm-3 control-label">Bis <span class="glyphicon glyphicon-info-sign" data-toggle="tooltip" data-placement="right" data-title="Format: DD.MM.YYYY. Wenn die Uhrzeit unwichtig ist, einfach auf 00:00 setzen"></span></label>
                          <div class="col-sm-9">
                              <div class="input-group date" id="end-time-picker">
                                  <input type="text" class="form-control" name="end-time" id="end-time" placeholder="Endzeit" required="required" th:field="*{endTime}"/>
                                  <span class="input-group-addon">
                                      <span class="glyphicon glyphicon-calendar"></span>
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="participants-limit" class="col-sm-3 control-label">Max. Teilnehmer</label>
                          <div class="col-sm-9">
                              <div class="input-group">
                                  <input type="number" class="form-control" name="participants-limit" id="participants-limit" placeholder="Teilnehmerlimit" th:field="*{participantsLimit}" />
                                  <span class="input-group-addon">
                                      Teilnehmer
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="participants-age" class="col-sm-3 control-label">Teilnehmeralter</label>
                          <div class="col-sm-9">
                              <div class="input-group">
                                  <input type="number" class="form-control" name="participants-age" id="participants-age" placeholder="min. Alter" th:field="*{participantsAge}"/>
                                  <span class="input-group-addon">
                                      Jahre
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="add-event-fees" class="col-sm-3 control-label">Preis</label>
                          <div class="col-sm-9" id="add-event-fees">
                              <div class="input-group margin-btm">
                                  <input type="number" step="0.1" class="form-control" name="internalFee" id="internalFee" placeholder="NAJU-Mitglieder" th:field="*{internalParticipationFee}" />
                                  <span class="input-group-addon"><span class="glyphicon glyphicon-eur"></span></span>
                              </div>
                              <div class="input-group">
                                  <input type="number" step="0.1" class="form-control" name="externalFee" id="externalFee" placeholder="nicht-Mitglieder" th:field="*{externalParticipationFee}" />
                                  <span class="input-group-addon"><span class="glyphicon glyphicon-eur"></span></span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="add-event-address" class="col-sm-3 control-label">Ort</label>
                          <div class="col-sm-9 address" id="add-event-address">
                              <input type="text" class="form-control street" name="street" placeholder="Straße, HNr." th:field="*{street}"/>
                              <input type="text" class="form-control zip" name="zip" placeholder="Plz" style="width: 30%; float: left;" th:field="*{zip}"/>
                              <input type="text" class="form-control city" name="city" placeholder="Stadt" style="width: 67%; float: right;" th:field="*{city}"/>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="add-event-belonging" class="col-sm-3 control-label">Zugehörigkeit</label>
                          <div class="col-sm-9" id="add-event-belonging">
                                  <label class="radio-inline">
                                      <input type="radio" id="add-event-belonging-localGroup" name="belonging" th:value="LOCALGROUP" checked="checked" /> Ortsgruppe
                                  </label>
                                  <label class="radio-inline">
                                      <input type="radio" id="add-event-belonging-project" name="belonging" th:value="PROJECT" /> Projekt
                                  </label>
                                  <div id="add-event-belonging-chapter-select" class="margin-btm-sm margin-top-lg">
                                      <label for="add-event-chapter" class="sr-only">Ortsgruppe</label>
                                      <select class="selectpicker" id="add-event-chapter" required="required" data-live-search="true" th:remove="all-but-first" th:field="*{localGroupId}">
                                          <option th:each="localGroup : ${localGroups}" th:text="${localGroup.name}" th:value="${localGroup.id}">NAJU Sachsen</option>
                                          <option>NAJU Dresden</option>
                                          <option>NAJU Freiberg</option>
                                      </select>
                                  </div>
                                  <div id="add-event-belonging-project-select"  class="margin-btm-sm margin-top-lg hide-initially">
                                      <label for="add-event-project" class="sr-only">Projekt</label>
                                      <select class="selectpicker" id="add-event-project" data-live-search="true" th:remove="all-but-first" th:field="*{projectId}">
                                          <option data-subtext="(NAJU Dresden)" th:each="project : ${projects}" th:text="${project.name}" th:attr="'data-subtext'=${project.localGroup.name}" th:value="${project.id}">Puppenstuben gesucht!</option>
                                          <option data-subtext="(NAJU Dresden)">Brutvogelkartierung in der Dresdner Heide</option>
                                          <option data-subtext="(NAJU Sachsen)">Überarbeitung der Webseite</option>
                                      </select>
                                  </div>
                          </div>
                      </div>
                  </form>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>
                  <button type="submit" class="btn btn-primary" form="add-event">Erstellen</button>
              </div>
          </div>
      </div>
  </div>

  <!-- 'filter events' modal -->
  <div class="modal fade" id="filter-events-form" tabindex="-1" role="dialog" aria-labelledby="filter-events-label">
      <div class="modal-dialog" role="document">
          <div class="modal-content">
              <header class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                  </button>
                  <h3 class="modal-title" id="filter-events-label">Veranstaltungen filtern</h3>
              </header>
              <div class="modal-body">
                  <form id="filter-events" class="form-horizontal" method="post" th:object="${filterEventsForm}" th:action="@{/events/filter}">
                      <div class="form-group">
                          <label for="filter-name" class="col-sm-3 control-label">Name</label>
                          <div class="col-sm-9">
                              <input type="text" id="filter-name" name="filter-name" class="form-control" autofocus="autofocus" placeholder="Name" th:field="*{name}" />
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="filter-start" class="col-sm-3 control-label">Startzeit</label>
                          <div class="col-sm-9">
                              <div class="col-sm-3 no-padding-left">
                                  <label for="filter-start-type" class="sr-only">Startzeit-Filter</label>
                                  <select id="filter-start-type" class="selectpicker" name="startFilterType" data-width="auto" style="float:left;" th:field="*{startFilterType}">
                                      <option value="none" selected="selected">egal</option>
                                      <option value="BEFORE">Vor</option>
                                      <option value="EXACT">Am</option>
                                      <option value="AFTER">Nach</option>
                                  </select>
                              </div>
                              <div id="filter-start-container" class="input-group hidden">
                                  <input type="text" id="filter-start" class="form-control" name="filter-start" placeholder="Start"
                                      data-toggle="tooltip" data-placement="left" data-title="Format: DD.MM.YYYY. Wenn die Uhrzeit unwichtig ist, einfach auf 00:00 setzen" th:field="*{start}"/>
                                  <span class="input-group-addon">
                                      <span class="glyphicon glyphicon-calendar"></span>
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="filter-end" class="col-sm-3 control-label">Endzeit</label>
                          <div class="col-sm-9">
                              <div class="col-sm-3 no-padding-left">
                                  <label for="filter-end-type" class="sr-only">Endzeit-Filter</label>
                                  <select id="filter-end-type" class="selectpicker" name="endFilterType" data-width="auto" style="float:left;" th:field="*{endFilterType}">
                                      <option value="none" selected="selected">egal</option>
                                      <option value="BEFORE">Vor</option>
                                      <option value="EXACT">Am</option>
                                      <option value="AFTER">Nach</option>
                                  </select>
                              </div>
                              <div id="filter-end-container" class="input-group hidden">
                                  <input type="text" id="filter-end" class="form-control" name="filter-start" placeholder="Ende"
                                      data-toggle="tooltip" data-placement="left" data-title="Format: DD.MM.YYYY. Wenn die Uhrzeit unwichtig ist, einfach auf 00:00 setzen" th:field="*{end}"/>
                                  <span class="input-group-addon">
                                      <span class="glyphicon glyphicon-calendar"></span>
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="filter-participants-limit" class="col-sm-3 control-label">Teilnehmerlimit</label>
                          <div class="col-sm-9">
                              <div class="col-sm-3 no-padding-left">
                                  <label for="filter-participants-limit-type" class="sr-only">Teilnehmerlimit-Filter</label>
                                  <select id="filter-participants-limit-type" class="selectpicker" name="participantsLimitFilterType" data-width="auto" style="float:left;" th:field="*{participantsLimitFilterType}">
                                      <option value="none" selected="selected">egal</option>
                                      <option value="MAXIMUM">Max.</option>
                                      <option value="EQUAL">Exakt</option>
                                      <option value="MINIMUM">Min.</option>
                                  </select>
                              </div>
                              <div id="filter-participants-limit-container" class="input-group hidden">
                                  <input type="number" id="filter-participants-limit" class="form-control" name="participants-limit" placeholder="Limit" th:field="*{participantsLimit}"/>
                                  <span class="input-group-addon">
                                      Teilnehmer
                                  </span>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="filter-participants-age" class="col-sm-3 control-label">Teilnehmeralter</label>
                          <div class="col-sm-9" id="filter-participants-age">
                              <div class="checkbox" style="margin-bottom: 15px;">
                                  <label><input type="checkbox" id="filter-participants-age-type" name="participants-age-filter-type" th:field="*{participantsAgeFilter}" />Nach Mindestteilnehmeralter filtern</label>
                              </div>
                              <div id="filter-participants-age-container" class="hide-initially">
                                  <div class="input-group">
                                      <input type="number" class="form-control" name="participants-age" placeholder="Alter" th:field="*{participantsAge}"/>
                                      <span class="input-group-addon">
                                          Jahre
                                      </span>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-sm-3 control-label">Preis</label>
                          <div class="col-sm-9">
                              <div class="col-sm-3 no-padding-left">
                                  <label for="filter-fee-type" class="sr-only">Teilnahmepreis-Filter</label>
                                  <select id="filter-fee-type" class="selectpicker" name="feeFilterType" data-width="auto" style="float:left;" th:field="*{feeFilterType}">
                                      <option value="none" selected="selected">egal</option>
                                      <option value="MAXIMUM">Max.</option>
                                      <option value="EQUAL">Exakt</option>
                                      <option value="MINIMUM">Min.</option>
                                  </select>
                              </div>
                              <div id="filter-fee-container" class="col-sm-9 hidden">
                                  <div class="input-group margin-btm">
                                      <label for="filter-internalFee" class="sr-only">TNB für NAJU-Mitglieder</label>
                                      <input type="number" step="0.1" class="form-control" name="internalFee" id="filter-internalFee" placeholder="NAJU-Mitglieder" th:field="*{internalFee}" />
                                      <span class="input-group-addon"><span class="glyphicon glyphicon-eur"></span></span>
                                  </div>
                                  <div class="input-group">
                                      <label for="filter-externalFee" class="sr-only">TNB für nicht-Mitglieder</label>
                                      <input type="number" step="0.1" class="form-control" name="externalFee" id="filter-externalFee" placeholder="nicht-Mitglieder" th:field="*{externalFee}" />
                                      <span class="input-group-addon"><span class="glyphicon glyphicon-eur"></span></span>
                                  </div>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label for="filter-address" class="col-sm-3 control-label">Adresse</label>
                          <div class="col-sm-9 address" id="filter-address">
                              <input type="text" class="form-control street" name="street" placeholder="Straße, HNr." th:field="*{street}"/>
                              <input type="text" class="form-control zip" name="zip" placeholder="Plz" style="width: 30%; float: left;" th:field="*{zip}"/>
                              <input type="text" class="form-control city" name="city" placeholder="Stadt" style="width: 67%; float: right;" th:field="*{city}"/>
                          </div>
                      </div>
                  </form>
              </div>
              <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>
                  <button type="submit" class="btn btn-primary" form="filter-events">Filtern</button>
              </div>
          </div>
      </div>
  </div>

  <!-- latest release notes modal -->
  <div class="modal fade" id="release-notes-modal" tabindex="-1" th:if="${releaseNotes}" sec:authorize="!getPrincipal().hasReadReleaseNotes()">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
          </button>
          <h3 class="modal-title" th:inline="text">Neue Adebar-Version: [[${releaseNotes.title} ?: '"${releaseNotes.title}"']]</h3>
        </div>
        <div class="modal-body">
          <pre th:text="${releaseNotes.description}"></pre>
          <p th:inline="text">Veröffentlich: [[${{releaseNotes.date}}]]</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary confirm" data-dismiss="modal">Super!</button>
        </div>
      </div>
    </div>
  </div>

</section>

<!-- page specific content-->
<main id="main">

    <!-- page specific menu items -->
    <header id="action-bar" class="form-inline clearfix">
        <h2 class="hidden">Menü</h2>

        <!-- the actions at last -->
        <div id="actions" class="pull-right">

            <!-- search bar -->
            <div class="form-group">
                <label class="sr-only" for="events">Name, Ort o.ä.</label>
                <div class="input-group">
                    <input id="events" type="text" class="form-control fuzzy-search" name="events" placeholder="Name, Ort o.ä."/>
                    <div class="input-group-addon"><span class="glyphicon glyphicon-search"></span></div>
                </div>
            </div>
            <div class="btn-group">
                <!-- 'add' button -->
                <button type="button" id="add-button" class="btn btn-default" data-toggle="modal" data-target="#add-event-form">
                    <span class="glyphicon glyphicon-plus"></span> Hinzufügen
                </button>

                <!-- 'filter' button -->
                <button type="button" id="filter-button" class="btn btn-default" data-toggle="modal" data-target="#filter-events-form">
                        <span class="glyphicon glyphicon-filter"></span> Filtern
                </button>

                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <span class="glyphicon glyphicon-cog"></span> Optionen
                    </button>
                    <ul class="dropdown-menu">
                        <li class="dropdown-header">Ansicht</li>
                        <li class="active"><a href="#">Tabellarisch</a></li>
                        <li style="text-decoration: line-through;"><a href="#">Nach Ortsgruppen</a></li>
                        <li style="text-decoration: line-through;"><a href="#">Kalender</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <!-- the 'real' content finally -->
    <section id="content" class="tab-content" style="margin-top: 2em; padding: 0 25px;">

            <h1>Veranstaltungen</h1>

            <!-- status messages -->
            <section id="status">
                <h2 class="hidden">Status</h2>


            </section>

            <!-- no events -->
            <section class="row" th:if="${ {#iterables.isEmpty(currentEvents)} and {#iterables.isEmpty(futureEvents)} and not {#objects.isSpecified(pastEvents)} }">
              <div class="container text-center">
                <div class="alert alert-info">
                  Hmm zur Zeit scheint nichts los zu sein...
                </div>
              </div>
            </section>

            <!-- current events -->
            <section class="row" th:if="${ {#objects.isSpecified(normalDisplay)} and not {#iterables.isEmpty(currentEvents)} }">
                <h2>Laufende Veranstaltungen</h2>
                <table id="current-events" class="table table-striped table-hover tablesorter">
                    <thead>
                        <tr>
                            <th>Name <span class="icon"></span></th>
                            <th>Datum <span class="icon"></span></th>
                            <th>Ort <span class="icon"></span></th>
                            <th>Teilnehmer <span class="icon"></span></th>
                            <th>Zugehörig <span class="icon"></span></th>
                        </tr>
                    </thead>
                    <tbody class="event-list-current" th:remove="all-but-first">
                        <tr th:each="event : ${currentEvents}">
                            <td><a class="event-name" href="eventDetails.html" th:href="@{'/events/' + ${event.id}}" th:text="${event.name}">HIFA-Camp</a></td>
                            <td class="event-time" th:text="${{#time.formatTimeSpan(event.getStartTime(), event.getEndTime())}}">24.05.-28.05.</td>
                            <td class="event-place" th:text="${event.place.city}">Niederlausitz</td>
                            <td class="text-center" th:text="${event.participantsCount}">28</td>
                            <td>
                                <a class="event-belonging" href="localGroupDetails.html" th:if="${currentEventsLocalGroups.containsKey(event)}" th:href="@{/localGroups/{id}(id=${currentEventsLocalGroups.get(event).getId()})}" th:text="${currentEventsLocalGroups.get(event).getName()}">
                                    NAJU Sachsen
                                </a>
                                <a class="event-belonging" href="projectDetails.html" th:if="${currentEventsProjects.containsKey(event)}" th:href="@{/projects/{id}(id=${currentEventsProjects.get(event).getId()})}" th:text="${currentEventsProjects.get(event).getName()}">
                                    Puppenstuben gesucht!
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td><a class="event-name" href="eventDetails.html">Nistkästen basteln</a></td>
                            <td class="event-time">26.05.</td>
                            <td class="event-place">Großdittmannsdorf</td>
                            <td class="text-center">---</td>
                            <td><a class="event-belonging" href="localGroupDetails.html">Großdittmannsdorf</a></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- future events -->
            <section class="row" th:if="${ {#objects.isSpecified(normalDisplay)} and not {#iterables.isEmpty(futureEvents)} }">
                <h2>Kommende Veranstaltungen</h2>
                <table id="prospective-events" class="table table-striped table-hover tablesorter">
                    <thead>
                        <tr>
                            <th>Name <span class="icon"></span></th>
                            <th>Datum <span class="icon"></span></th>
                            <th>Ort <span class="icon"></span></th>
                            <th>Anmeldungen <span class="icon"></span></th>
                            <th>Restplätze <span class="icon"></span></th>
                            <th>Zugehörig <span class="icon"></span></th>
                        </tr>
                    </thead>
                    <tbody class="event-list-prospective" th:remove="all-but-first">
                        <tr th:each="event : ${futureEvents}">
                            <td><a class="event-name" href="eventDetails.html" th:href="@{'/events/' + ${event.id}}" th:text="${event.name}">Nistkästen basteln</a></td>
                            <td class="event-time" th:text="${{#time.formatTimeSpan(event.getStartTime(), event.getEndTime())}}">02.06.</td>
                            <td class="event-place" th:text="${event.place.city}">Großdittmannsdorf</td>
                            <td class="text-center" th:text="${event.participantsCount}">---</td>
                            <td class="text-center" th:text="${event.remainingCapacity} > 1000000 ? 'unbegrenzt' : ${event.remainingCapacity}">---</td>
                            <td>
                                <a class="event-belonging" href="localGroupDetails.html" th:if="${futureEventsLocalGroups.containsKey(event)}" th:href="@{/localGroups/{id}(id=${futureEventsLocalGroups.get(event).getId()})}" th:text="${futureEventsLocalGroups.get(event).getName()}">
                                    Großdittmannsdorf
                                </a>
                                <a class="event-belonging" href="projectDetails.html" th:if="${futureEventsProjects.containsKey(event)}" th:href="@{/projects/{id}(id=${futureEventsProjects.get(event).getId()})}" th:text="${futureEventsProjects.get(event).getName()}">
                                    Brutvogelkartierung NAJU DD
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td><a class="event-name" href="eventDetails.html">Sommerferielager "Nachhaltiges Leben"</a></td>
                            <td class="event-time">24.06.-30.06.</td>
                            <td class="event-place">Dachsenberg</td>
                            <td class="text-center">12</td>
                            <td class="text-center">8</td>
                            <td><a class="event-belonging" href="localGroupDetails.html">Dresden</a></td>
                        </tr>
                        <tr>
                            <td><a class="event-name" href="eventDetails.html">Sommerfest</a></td>
                            <td class="event-time">08./09.07.</td>
                            <td class="event-place">Dachsenberg</td>
                            <td class="text-center">---</td>
                            <td class="text-center">---</td>
                            <td><a class="event-belonging" href="localGroupDetails.html">Dresden</a></td>
                        </tr>
                        <tr>
                            <td><a class="event-name" href="eventDetails.html">Paddelcamp</a></td>
                            <td class="event-time">16.07.-23.07.</td>
                            <td class="event-place">Berounka</td>
                            <td class="text-center">10</td>
                            <td class="text-center">0</td>
                            <td><a class="event-belonging" href="localGroupDetails.html">Sachsen</a></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <hr />

            <section class="row" style="margin-top: 3em;" th:if="${normalDisplay}">
                <p class="text-center"><a href="#" th:href="@{/events/past}">Vergangene Veranstaltungen anzeigen</a></p>
            </section>

            <!-- past events -->
            <section class="row" th:if="${pastEvents}">
                <h2>Vergangene Veranstaltungen</h2>
                <table id="past-events" class="table table-striped table-hover tablesorter">
                    <thead>
                        <tr>
                            <th>Name <span class="icon"></span></th>
                            <th>Datum <span class="icon"></span></th>
                            <th>Ort <span class="icon"></span></th>
                            <th>Teilnehmer <span class="icon"></span></th>
                            <th>Zugehörig <span class="icon"></span></th>
                        </tr>
                    </thead>
                    <tbody class="event-list-past" th:remove="all-but-first">
                        <tr th:each="event : ${pastEvents}">
                            <td><a class="event-name" href="eventDetails.html" th:href="@{'/events/' + ${event.id}}" th:text="${event.name}">HIFA-Camp</a></td>
                            <td class="event-time" th:text="${{#time.formatTimeSpan(event.getStartTime(), event.getEndTime())}}">24.05.-28.05.</td>
                            <td class="event-place" th:text="${event.place.city}">Niederlausitz</td>
                            <td class="text-center" th:text="${event.participantsCount}">28</td>
                            <td>
                                <a class="event-belonging" href="localGroupDetails.html" th:if="${pastEventsLocalGroups.containsKey(event)}" th:href="@{/localGroups/{id}(id=${pastEventsLocalGroups.get(event).getId()})}" th:text="${pastEventsLocalGroups.get(event).getName()}">
                                    NAJU Sachsen
                                </a>
                                <a class="event-belonging" href="projectDetails.html" th:if="${pastEventsProjects.containsKey(event)}" th:href="@{/projects/{id}(id=${pastEventsProjects.get(event).getId()})}" th:text="${pastEventsProjects.get(event).getName()}">
                                    NAJU Sachsen
                                </a>
                            </td>
                        </tr>
                        <tr>
                            <td><a class="event-name" href="eventDetails.html">Nistkästen basteln</a></td>
                            <td class="event-time">26.05.</td>
                            <td class="event-place">Großdittmannsdorf</td>
                            <td class="text-center">---</td>
                            <td><a class="event-belonging" href="localGroupDetails.html">Großdittmannsdorf</a></td>
                        </tr>
                    </tbody>
                </table>
            </section>

            <!-- filtered events -->
            <section class="row" th:if="${filteredEvents}">
                <h2>Übereinstimmende Veranstaltungen</h2>
                <table id="filtered-events" class="table table-striped table-hover tablesorter">
                    <thead>
                        <tr>
                            <th>Name <span class="icon"></span></th>
                            <th>Datum <span class="icon"></span></th>
                            <th>Ort <span class="icon"></span></th>
                            <th>Teilnehmer <span class="icon"></span></th>
                            <th>Zugehörig <span class="icon"></span></th>
                        </tr>
                    </thead>
                    <tbody class="event-list-filtered" th:remove="all-but-first">
                        <tr th:each="event : ${filteredEvents}">
                            <td><a class="event-name" href="eventDetails.html" th:href="@{'/events/' + ${event.id}}" th:text="${event.name}">HIFA-Camp</a></td>
                            <td class="event-time" th:text="${{#time.formatTimeSpan(event.getStartTime(), event.getEndTime())}}">24.05.-28.05.</td>
                            <td class="event-place" th:text="${event.place.city}">Niederlausitz</td>
                            <td class="text-center" th:text="${event.participantsCount}">28</td>
                            <td>
                                <a class="event-belonging" href="localGroupDetails.html" th:if="${filteredEventsLocalGroups.containsKey(event)}" th:href="@{/localGroups/{id}(id=${filteredEventsLocalGroups.get(event).getId()})}" th:text="${filteredEventsLocalGroups.get(event).getName()}">Sachsen</a>
                                <a class="event-belonging" href="projectDetails.html" th:if="${filteredEventsProjects.containsKey(event)}" th:href="@{/projects/{id}(id=${filteredEventsProjects.get(event).getId()})}" th:text="${filteredEventsProjects.get(event).getName()}">NAJU Sachsen</a>
                            </td>
                        </tr>
                        <tr>
                            <td><a class="event-name" href="eventDetails.html">Nistkästen basteln</a></td>
                            <td class="event-time">26.05.</td>
                            <td class="event-place">Großdittmannsdorf</td>
                            <td class="text-center">---</td>
                            <td><a class="event-belonging" href="localGroupDetails.html">Großdittmannsdorf</a></td>
                        </tr>
                    </tbody>
                </table>
            </section>

    </section>

    <!-- initialize search bar -->
    <script type="text/javascript" th:unless="${pastEvents}">
        var fuzzyOptions = {
           searchClass: "fuzzy-search",
           location: 0,
           distance: 150,
           threshold: 0.4,
           multiSearch: true
         };

         if ($('#current-events').length) {
            var currentEventsOptions = {
                listClass: "event-list-current",
                valueNames: ['event-name', 'event-time', 'event-place', 'event-belonging'],
                plugins: [ListFuzzySearch(fuzzyOptions)]
            };
            new List('main', currentEventsOptions);
         }

         if ($('#prospective-events').length) {
            var prospectiveEventsOptions = {
                listClass: "event-list-prospective",
                valueNames: ['event-name', 'event-time', 'event-place', 'event-belonging'],
                plugins: [ListFuzzySearch(fuzzyOptions)]
            };
            new List('main', prospectiveEventsOptions);
         }

         var dateSpanExtractor = function(node) {
             // TODO: extract dates function here
         };

         $(document).ready(function() {
             $('#current-events').tablesorter();
             $('#prospective-events').tablesorter();
         })
    </script>

    <script type="text/javascript" th:if="${pastEvents}">
        var fuzzyOptions = {
           searchClass: "fuzzy-search",
           location: 0,
           distance: 150,
           threshold: 0.4,
           multiSearch: true
         };
         var pastEventsOptions = {
            listClass: "event-list-past",
            valueNames: ['event-name', 'event-time', 'event-place', 'event-belonging'],
            plugins: [ListFuzzySearch(fuzzyOptions)]
         };

         new List('main', pastEventsOptions);

         var dateSpanExtractor = function(node) {
             // TODO: extract dates function here
         };

         $(document).ready(function() {
             $('#past-events').tablesorter();
         });
    </script>

    <script type="text/javascript" th:if="${filteredEvents}">
        var fuzzyOptions = {
           searchClass: "fuzzy-search",
           location: 0,
           distance: 150,
           threshold: 0.4,
           multiSearch: true
         };
         var filteredEventsOptions = {
            listClass: "event-list-filtered",
            valueNames: ['event-name', 'event-time', 'event-place', 'event-belonging'],
            plugins: [ListFuzzySearch(fuzzyOptions)]
         };

         new List('main', filteredEventsOptions);

         var dateSpanExtractor = function(node) {
             // TODO: extract dates function here
         };

         $(document).ready(function() {
             $('#filtered-events').tablesorter();
         });
    </script>

    <form id="logout-user" method="POST" th:action="@{/logout}">
      <input type="hidden" name="csrf" th:value="csrf" />
    </form>

</main>
<input type="hidden" id="csrf" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
<span class="hidden" id="principal" sec:authentication="principal.associatedPerson"></span>
<script src="../static/resources/js/init.js" th:src="@{/resources/js/init.js}"></script>
<script src="../static/resources/js/events.js" th:src="@{/resources/js/events.js}"></script>
</body>
</html>
