openapi: 3.0.0
paths:
  /test:
    post:
      description: subscribes a client to updates relevant to the requestor's account,
        as identified by the input token.  The supplied url will be used as the delivery
        address for response payloads
      operationId: subscribe
      parameters:
      - name: x-auth-token
        in: header
        schema:
          type: string
          description: the authentication token provided after initially authenticating
            to the application
      - name: url
        in: query
        schema:
          type: string
          description: the URL to call with response data
      responses:
        default:
          description: default response
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/SubscriptionResponse'
      callbacks:
        subscription:
          http://$request.query.url:
            get:
              description: payload data will be received
            put:
              description: payload data will be sent
            post:
              description: payload data will be sent
              parameters:
              - name: subscriptionId
                in: path
                required: true
                schema:
                  type: string
                  description: the generated UUID
                  format: uuid
                  readOnly: true
              responses:
                200:
                  description: Return this code if the callback was received and processed
                    successfully
                205:
                  description: Return this code to unsubscribe from future data updates
                default:
                  description: All other response codes will disable this callback
                    subscription
components:
  schemas:
    SubscriptionResponse:
      type: object
