<!DOCTYPE html>
<!--
Copyright (C) 2014 Language In Interaction

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA  02111-1307, USA.
-->
<html>
    <head>
        <title>Imitation Mobile Frame</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body style="background: black;">
        <script language="javascript" type="text/javascript">
            function rotate() {
                var frameToRotate = document.getElementById("testingFrame");
                var oldWidth = frameToRotate.style.width;
                var oldHeight = frameToRotate.style.height;
                frameToRotate.style.width = oldHeight;
                frameToRotate.style.height = oldWidth;
            }

            function nexus9() {
                var frameToRotate = document.getElementById("testingFrame");
                frameToRotate.style.width = "1536px";
                frameToRotate.style.height = "2048px";
            }

            function nexus7() {
                var frameToRotate = document.getElementById("testingFrame");
                frameToRotate.style.width = "1200px";
                frameToRotate.style.height = "1920px";
            }

            function motoG() {
                var frameToRotate = document.getElementById("testingFrame");
                frameToRotate.style.width = "720px";
                frameToRotate.style.height = "1280px";
            }

            function small() {
                var frameToRotate = document.getElementById("testingFrame");
                frameToRotate.style.width = "360px";
                frameToRotate.style.height = "640px";
            }

            function robot() {
                var robotMessagesDiv = document.getElementById("robot_messages");
                robotMessagesDiv.innerHTML = "robot started";
                var robotTimer = setInterval(function () {
                    findAndClick()
                }, 3000);
            }
            function findAndClick() {
                document.getElementById("robot_messages").innerHTML = "robot activated at " + new Date().toLocaleTimeString();

                var tagArray = ['input', 'textarea'];
                for (tagInxex in tagArray) {
                    var textinput = document.getElementById('testingFrame').contentWindow.document.getElementsByTagName(tagArray[tagInxex]);
                    for (var inputIndex = 0; inputIndex < textinput.length; inputIndex++) {
                        if (textinput[inputIndex].className === "metadataError") {
                            if (textinput[inputIndex].value === "0") {
                                textinput[inputIndex].value = "qqq";
                            } else {
                                textinput[inputIndex].value = "0";
                            }
                        } else {
                            textinput[inputIndex].value = "robot run " + new Date().toLocaleTimeString();
                        }
                    }
                }

                var buttons = document.getElementById('testingFrame').contentWindow.document.getElementsByTagName('button');
//                for (var buttonIndex = 0; buttonIndex < buttons.length; buttonIndex++) {
                //buttons[buttonIndex].click();
//                    buttons[buttonIndex].innerHTML = "robot run " + buttonIndex;
//                }
                var randomIndex = Math.floor((Math.random() * buttons.length));
                if (buttons[randomIndex] !== 'undefined' && buttons[randomIndex] !== null) {
                    buttons[randomIndex].click();
                }
            }
        </script>
        <div style="color: white;" id="robot_messages"></div>
        <table>
            <tr><td><button type="button" onclick="robot();">start robot</button></td><td rowspan="7"><iframe style="margin-left: auto; margin-right: auto; height:360px; width:640px;" id="testingFrame" src="ExperimentTemplate.html"></iframe></td></tr>
            <tr><td><button type="button" onclick="rotate();">rotate</button></td><td></td></tr>
            <tr><td><button type="button" onclick="motoG();">motoG</button></td><td></td></tr>
            <tr><td><button type="button" onclick="nexus7();">nexus7</button></td><td></td></tr>
            <tr><td><button type="button" onclick="nexus9();">nexus9</button></td><td></td></tr>
            <tr><td><button type="button" onclick="small();">small</button></td><td></td></tr>
            <tr><td style="height: 100%"></td><td></td></tr>
        </table>
    </body>
</html>
